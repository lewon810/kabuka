<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIæ ªä¾¡äºˆæ¸¬ï¼šãƒ¦ãƒ‹ãƒãƒ¼ã‚¹é¸å®šå®Œå…¨ã‚¬ã‚¤ãƒ‰</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.24.1.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #f8fafc;
            color: #1e293b;
        }

        /* Chart Container Styling - Mandatory Strictness */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            /* Base height */
            max-height: 400px;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(4px);
            border: 1px solid rgba(226, 232, 240, 0.8);
        }

        /* Custom Scrollbar for code blocks */
        .code-scroll::-webkit-scrollbar {
            height: 8px;
        }

        .code-scroll::-webkit-scrollbar-track {
            background: #1e293b;
        }

        .code-scroll::-webkit-scrollbar-thumb {
            background: #475569;
            border-radius: 4px;
        }
    </style>
</head>

<body class="min-h-screen flex flex-col">

    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <span class="text-2xl text-teal-700 font-bold">ğŸ“Š AI-Quant</span>
                <span class="text-gray-400">|</span>
                <h1 class="text-sm md:text-base font-bold text-gray-700">ãƒ¦ãƒ‹ãƒãƒ¼ã‚¹é¸å®šæˆ¦ç•¥ã‚¬ã‚¤ãƒ‰</h1>
            </div>
            <nav class="hidden md:flex space-x-8">
                <a href="#strategy" class="text-gray-600 hover:text-teal-700 transition">æˆ¦ç•¥ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿</a>
                <a href="#simulation" class="text-gray-600 hover:text-teal-700 transition">è¦–è¦šåŒ–ãƒ©ãƒœ</a>
                <a href="#code" class="text-gray-600 hover:text-teal-700 transition">å®Ÿè£…ã‚³ãƒ¼ãƒ‰</a>
            </nav>
        </div>
    </header>

    <main class="flex-grow">

        <!-- Hero Section -->
        <section class="bg-gradient-to-br from-slate-900 to-slate-800 text-white py-16">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <h2 class="text-3xl md:text-5xl font-bold mb-6">äºˆæ¸¬ç²¾åº¦ã®8å‰²ã¯ã€ŒéŠ˜æŸ„é¸å®šã€ã§æ±ºã¾ã‚‹</h2>
                <p class="text-lg md:text-xl text-slate-300 max-w-3xl mx-auto mb-10">
                    AIãƒ¢ãƒ‡ãƒ«ã€ç‰¹ã«ãƒ©ãƒ³ã‚­ãƒ³ã‚°å­¦ç¿’ã«ãŠã„ã¦æœ€ã‚‚é‡è¦ãªã®ã¯ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§ã¯ãªãã€Œã©ã®éŠ˜æŸ„ã‚’ãƒã‚¹ã‚±ãƒƒãƒˆã«å…¥ã‚Œã‚‹ã‹ï¼ˆãƒ¦ãƒ‹ãƒãƒ¼ã‚¹ï¼‰ã€ã§ã™ã€‚<br>
                    æµå‹•æ€§ã€æŒ‡æ•°æ¡ç”¨ã€ã‚»ã‚¯ã‚¿ãƒ¼ãƒãƒ©ãƒ³ã‚¹ã€‚ãƒ—ãƒ­ã®é¸å®šåŸºæº–ã‚’ã“ã“ã§ãƒã‚¹ã‚¿ãƒ¼ã—ã¾ã—ã‚‡ã†ã€‚
                </p>
                <button onclick="document.getElementById('strategy').scrollIntoView({behavior: 'smooth'})"
                    class="bg-teal-600 hover:bg-teal-500 text-white font-bold py-3 px-8 rounded-full shadow-lg transition transform hover:-translate-y-1">
                    æˆ¦ç•¥ã‚’é¸æŠã™ã‚‹
                </button>
            </div>
        </section>

        <!-- Strategy Engine Section -->
        <section id="strategy" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">

                <!-- Left: Controls -->
                <div class="lg:col-span-4 space-y-6">
                    <div class="bg-white p-6 rounded-xl shadow-md border border-gray-100">
                        <h3 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2">ã‚ãªãŸã®ã‚¹ã‚¿ã‚¤ãƒ«ã¯ï¼Ÿ</h3>
                        <p class="text-sm text-gray-600 mb-6">çµŒé¨“ãƒ¬ãƒ™ãƒ«ã«å¿œã˜ã¦æœ€é©ãªãƒ¦ãƒ‹ãƒãƒ¼ã‚¹ï¼ˆå¯¾è±¡éŠ˜æŸ„ç¾¤ï¼‰ã‚’ææ¡ˆã—ã¾ã™ã€‚</p>

                        <div class="space-y-3">
                            <button onclick="setStrategy('beginner')" id="btn-beginner"
                                class="w-full text-left p-4 rounded-lg border-2 transition-all duration-200 border-teal-500 bg-teal-50 shadow-md">
                                <div class="flex items-center justify-between">
                                    <span class="font-bold text-teal-900">åˆå¿ƒè€…ãƒ»ä¸­ç´šè€…</span>
                                    <span class="text-2xl">ğŸŒ±</span>
                                </div>
                                <p class="text-xs text-teal-700 mt-1">ã¾ãšã¯å‹•ããƒ¢ãƒ‡ãƒ«ã‚’ä½œã‚ŠãŸã„</p>
                            </button>

                            <button onclick="setStrategy('pro')" id="btn-pro"
                                class="w-full text-left p-4 rounded-lg border-2 border-gray-200 hover:border-teal-300 transition-all duration-200 bg-white">
                                <div class="flex items-center justify-between">
                                    <span class="font-bold text-gray-700">ä¸Šç´šè€…ãƒ»ã‚¬ãƒå‹¢</span>
                                    <span class="text-2xl">ğŸš€</span>
                                </div>
                                <p class="text-xs text-gray-500 mt-1">å®Ÿé‹ç”¨ãƒ»é«˜ç²¾åº¦ã‚’ç›®æŒ‡ã™</p>
                            </button>
                        </div>
                    </div>

                    <!-- Key Metrics Display -->
                    <div class="bg-slate-800 text-white p-6 rounded-xl shadow-md">
                        <h4 class="text-sm font-bold text-slate-400 uppercase tracking-wider mb-4">ã‚¿ãƒ¼ã‚²ãƒƒãƒˆæŒ‡æ¨™</h4>
                        <div class="flex justify-between items-end mb-4">
                            <div>
                                <p class="text-xs text-slate-400">æ¨å¥¨éŠ˜æŸ„æ•°</p>
                                <p id="metric-count" class="text-3xl font-bold text-teal-400">225</p>
                            </div>
                            <div class="text-right">
                                <p class="text-xs text-slate-400">ãƒ‡ãƒ¼ã‚¿å–å¾—é›£æ˜“åº¦</p>
                                <p id="metric-difficulty" class="text-xl font-bold text-amber-400">â˜…â˜†â˜†â˜†â˜†</p>
                            </div>
                        </div>
                        <div class="w-full bg-slate-700 h-2 rounded-full overflow-hidden">
                            <div id="metric-bar" class="bg-teal-500 h-full transition-all duration-500"
                                style="width: 20%"></div>
                        </div>
                    </div>
                </div>

                <!-- Right: Content Display -->
                <div class="lg:col-span-8">
                    <div
                        class="bg-white p-8 rounded-xl shadow-lg border border-gray-100 h-full flex flex-col justify-center">
                        <div id="strategy-content">
                            <!-- Dynamic Content Injected Here -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Visualization Lab -->
        <section id="simulation" class="bg-slate-50 py-12 border-t border-gray-200">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-10">
                    <h2 class="text-3xl font-bold text-gray-900">è¦–è¦šåŒ–ãƒ©ãƒœï¼šãªãœãã®é¸å®šãŒå¿…è¦ãªã®ã‹ï¼Ÿ</h2>
                    <p class="text-gray-600 mt-2">ã€Œæµå‹•æ€§ã€ã¨ã€Œã‚»ã‚¯ã‚¿ãƒ¼åˆ†æ•£ã€ãŒãƒ¢ãƒ‡ãƒ«ç²¾åº¦ã«ä¸ãˆã‚‹å½±éŸ¿ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã—ã¾ã™ã€‚</p>
                </div>

                <!-- Tabs -->
                <div class="flex justify-center mb-8">
                    <div class="bg-white p-1 rounded-lg shadow-sm border border-gray-200 inline-flex">
                        <button onclick="switchTab('liquidity')" id="tab-liquidity"
                            class="px-6 py-2 rounded-md text-sm font-medium bg-teal-600 text-white shadow-sm transition-all">
                            1. æµå‹•æ€§ã¨ãƒã‚¤ã‚º
                        </button>
                        <button onclick="switchTab('sector')" id="tab-sector"
                            class="px-6 py-2 rounded-md text-sm font-medium text-gray-600 hover:text-teal-600 transition-all">
                            2. ã‚»ã‚¯ã‚¿ãƒ¼ãƒãƒ©ãƒ³ã‚¹
                        </button>
                    </div>
                </div>

                <!-- Chart Area -->
                <div class="bg-white p-6 md:p-8 rounded-2xl shadow-xl border border-gray-100 relative min-h-[500px]">

                    <!-- Liquidity View -->
                    <div id="view-liquidity" class="transition-opacity duration-300">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                            <div class="md:col-span-1 space-y-4">
                                <h3 class="text-xl font-bold text-gray-800">å£²è²·ä»£é‡‘ã¨ãƒ¢ãƒ‡ãƒ«èª¤å·®ã®é–¢ä¿‚</h3>
                                <p class="text-sm text-gray-600 leading-relaxed">
                                    AIãƒ¢ãƒ‡ãƒ«ã«ã¨ã£ã¦æœ€å¤§ã®æ•µã¯ã€Œã‚¹ãƒªãƒƒãƒšãƒ¼ã‚¸ã€ã¨ã€Œãƒã‚¤ã‚ºã€ã§ã™ã€‚<br><br>
                                    å³ã®å›³ã¯ã€å£²è²·ä»£é‡‘ï¼ˆæ¨ªè»¸ï¼‰ã¨äºˆæ¸¬èª¤å·®ï¼ˆç¸¦è»¸ï¼‰ã®é–¢ä¿‚ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚
                                    <strong
                                        class="text-amber-600">å£²è²·ä»£é‡‘ãŒä½ã„éŠ˜æŸ„ï¼ˆå·¦å´ï¼‰ã¯ã€å°‘é¡ã®æ³¨æ–‡ã§ä¾¡æ ¼ãŒä¹±é«˜ä¸‹ã™ã‚‹ãŸã‚ã€AIãŒèª¤ã£ãŸå­¦ç¿’ã‚’ã—ã‚„ã™ããªã‚Šã¾ã™ã€‚</strong>
                                </p>
                                <div class="bg-amber-50 border-l-4 border-amber-500 p-4 rounded">
                                    <p class="text-xs text-amber-800 font-bold">ğŸ’¡ ãƒã‚¤ãƒ³ãƒˆ</p>
                                    <p class="text-xs text-amber-700 mt-1">
                                        ä¸Šä½500ã€œ2000éŠ˜æŸ„ã«çµã‚‹ã“ã¨ã§ã€ã“ã®ã€Œãƒã‚¤ã‚ºé ˜åŸŸã€ã‚’è‡ªå‹•çš„ã«é™¤å¤–ã§ãã¾ã™ã€‚
                                    </p>
                                </div>
                            </div>
                            <div class="md:col-span-2 flex flex-col justify-center">
                                <div id="plotly-liquidity" class="chart-container w-full"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Sector View -->
                    <div id="view-sector" class="hidden transition-opacity duration-300">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                            <div class="md:col-span-1 space-y-4">
                                <h3 class="text-xl font-bold text-gray-800">ãƒ©ãƒ³ã‚­ãƒ³ã‚°å­¦ç¿’ã¨ã‚»ã‚¯ã‚¿ãƒ¼åˆ†æ•£</h3>
                                <p class="text-sm text-gray-600 leading-relaxed">
                                    JPXæ–¹å¼ï¼ˆç›¸å¯¾ãƒªã‚¿ãƒ¼ãƒ³äºˆæ¸¬ï¼‰ã§ã¯ã€å¸‚å ´å…¨ä½“ãŒæš´è½ã—ã¦ã‚‚ã€Œç›¸å¯¾çš„ã«å¼·ã„éŠ˜æŸ„ã€ã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚<br><br>
                                    ITæ ªã°ã‹ã‚Šé¸ã¶ã¨ã€ITã‚»ã‚¯ã‚¿ãƒ¼å…¨ä½“ã®æš´è½æ™‚ã«é †ä½ãŒä»˜ã‘ã‚‰ã‚Œãªããªã‚Šã¾ã™ã€‚
                                </p>
                                <div class="space-y-2 mt-4">
                                    <p class="text-xs font-bold text-gray-500 uppercase">ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ“ä½œ</p>
                                    <button onclick="updateSectorChart('normal')"
                                        class="w-full text-left px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded text-sm transition">
                                        ğŸ“ˆ é€šå¸¸ç›¸å ´ (é€£å‹•)
                                    </button>
                                    <button onclick="updateSectorChart('rotation')"
                                        class="w-full text-left px-4 py-2 bg-teal-50 hover:bg-teal-100 text-teal-700 border border-teal-200 rounded text-sm transition">
                                        ğŸ”„ ã‚»ã‚¯ã‚¿ãƒ¼ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ (ä¹–é›¢)
                                    </button>
                                    <button onclick="updateSectorChart('crash')"
                                        class="w-full text-left px-4 py-2 bg-red-50 hover:bg-red-100 text-red-700 border border-red-200 rounded text-sm transition">
                                        ğŸ“‰ å¸‚å ´ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ (å…¨ä½“ä¸‹è½)
                                    </button>
                                </div>
                            </div>
                            <div class="md:col-span-2 flex flex-col justify-center">
                                <div class="chart-container w-full">
                                    <canvas id="chart-sector"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </section>

        <!-- Code Implementation Section -->
        <section id="code" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <h2 class="text-3xl font-bold text-gray-900 mb-8 text-center">å®Ÿè·µï¼šPythonã‚³ãƒ¼ãƒ‰ã§ãƒ¦ãƒ‹ãƒãƒ¼ã‚¹ã‚’å–å¾—</h2>

            <div class="bg-slate-900 rounded-xl overflow-hidden shadow-2xl">
                <!-- Code Tabs -->
                <div class="flex border-b border-slate-700 bg-slate-800">
                    <button onclick="showCode('A')" id="btn-code-A"
                        class="px-6 py-3 text-sm font-medium text-teal-400 border-b-2 border-teal-400 bg-slate-700 focus:outline-none transition">
                        æ–¹æ³•A: æ—¥çµŒ225 (æ¨å¥¨)
                    </button>
                    <button onclick="showCode('B')" id="btn-code-B"
                        class="px-6 py-3 text-sm font-medium text-slate-400 hover:text-slate-200 focus:outline-none transition">
                        æ–¹æ³•B: å£²è²·ä»£é‡‘ä¸Šä½ (ã‚«ã‚¹ã‚¿ãƒ )
                    </button>
                </div>

                <!-- Code Content -->
                <div class="relative group">
                    <button onclick="copyCode()"
                        class="absolute top-4 right-4 bg-slate-700 hover:bg-slate-600 text-white text-xs px-3 py-1.5 rounded opacity-0 group-hover:opacity-100 transition border border-slate-600">
                        ğŸ“‹ Copy Code
                    </button>

                    <div id="code-content-A" class="p-6 overflow-x-auto code-scroll">
                        <pre class="font-mono text-sm text-slate-300 leading-relaxed"><code>import pandas as pd

def get_nikkei225_tickers():
    """
    Wikipediaã‹ã‚‰æ—¥çµŒå¹³å‡æ¡ç”¨éŠ˜æŸ„ã®ãƒªã‚¹ãƒˆã‚’å–å¾—ã™ã‚‹
    æœ€ã‚‚æ‰‹è»½ã§ã€æ„Ÿæƒ…åˆ†æã¨ã®ç›¸æ€§ã‚‚è‰¯ã„æ‰‹æ³•ã§ã™ã€‚
    """
    url = "https://en.wikipedia.org/wiki/Nikkei_225"
    try:
        tables = pd.read_html(url)
        # éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ãŒå«ã¾ã‚Œã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’æ¢ã™ï¼ˆé€šå¸¸ã¯æœ€åˆã‹2ç•ªç›®ï¼‰
        df = tables[0] 
        
        # ã‚«ãƒ©ãƒ åã‚’èª¿æ•´ï¼ˆWikipediaã®æ§‹æˆã«ã‚ˆã‚‹ï¼‰
        print("å–å¾—ãƒ‡ãƒ¼ã‚¿ä¾‹:", df.head())
        
        # éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰æŠ½å‡º (Symbolã‚«ãƒ©ãƒ ã‚’æƒ³å®š)
        tickers = df['Symbol'].astype(str).tolist()
        return tickers

    except Exception as e:
        print(f"å–å¾—ã‚¨ãƒ©ãƒ¼: {e}")
        return []

# å®Ÿè¡Œ
# tickers = get_nikkei225_tickers()
# print(f"{len(tickers)}éŠ˜æŸ„ã‚’å–å¾—ã—ã¾ã—ãŸ")</code></pre>
                    </div>

                    <div id="code-content-B" class="p-6 overflow-x-auto code-scroll hidden">
                        <pre class="font-mono text-sm text-slate-300 leading-relaxed"><code>import yfinance as yf
import pandas as pd

def get_liquid_universe(candidate_tickers, days=30, top_n=500):
    """
    å€™è£œéŠ˜æŸ„ãƒªã‚¹ãƒˆã®ä¸­ã‹ã‚‰ã€ç›´è¿‘ã®å¹³å‡å£²è²·ä»£é‡‘ãŒå¤§ãã„ä¸Šä½NéŠ˜æŸ„ã‚’è¿”ã™
    æœ¬æ ¼çš„ãªAIãƒ¢ãƒ‡ãƒ«æ§‹ç¯‰ï¼ˆJPXæ–¹å¼ãªã©ï¼‰å‘ã‘ã€‚
    """
    # ä¸€æ‹¬ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
    data = yf.download(candidate_tickers, period=f"{days}d", progress=False)
    
    # å£²è²·ä»£é‡‘ = çµ‚å€¤ * å‡ºæ¥é«˜
    # MultiIndexã‚«ãƒ©ãƒ ã®å ´åˆã®å‡¦ç†ãŒå¿…è¦ãªå ´åˆãŒã‚ã‚Šã¾ã™
    close = data['Close']
    volume = data['Volume']
    
    trading_value = close * volume
    
    # å¹³å‡å£²è²·ä»£é‡‘ã§é™é †ã‚½ãƒ¼ãƒˆ
    mean_trading_value = trading_value.mean().sort_values(ascending=False)
    
    # ä¸Šä½NéŠ˜æŸ„ã®ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—
    top_tickers = mean_trading_value.head(top_n).index.tolist()
    return top_tickers

# æ³¨æ„: candidate_tickersã«ã¯ã€æ±è¨¼å…¨éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ã®ãƒªã‚¹ãƒˆãŒå¿…è¦ã§ã™ã€‚
# å…¨éŠ˜æŸ„ãƒªã‚¹ãƒˆã¯JPXå…¬å¼ã‚µã‚¤ãƒˆã‹ã‚‰Excelã‚’DLã—ã¦ä½œæˆã—ã¦ãã ã•ã„ã€‚</code></pre>
                    </div>
                </div>
            </div>

            <div class="mt-8 bg-teal-50 border border-teal-200 rounded-lg p-6 flex items-start gap-4">
                <div class="text-3xl">ğŸ</div>
                <div>
                    <h3 class="font-bold text-teal-800 text-lg">çµè«–ï¼šã¾ãšä½•ã‹ã‚‰å§‹ã‚ã‚‹ã¹ãã‹ï¼Ÿ</h3>
                    <p class="text-teal-700 mt-2 text-sm leading-relaxed">
                        æœ€åˆã¯è¤‡é›‘ãªã“ã¨ã‚’ã›ãšã€<strong>æ–¹æ³•A (æ—¥çµŒ225éŠ˜æŸ„)</strong> ã®ãƒªã‚¹ãƒˆã‚’ä½œæˆã—ã€yfinanceã§ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦ãƒ¢ãƒ‡ãƒ«ã‚’å›ã—ã¾ã—ã‚‡ã†ã€‚<br>
                        ãƒ‡ãƒ¼ã‚¿ã®æ¬ æã‚„æµå‹•æ€§ä¸è¶³ã«ã‚ˆã‚‹ã‚¨ãƒ©ãƒ¼ã‚’å›é¿ã§ãã€ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®æ¤œè¨¼ã«é›†ä¸­ã§ãã¾ã™ã€‚
                    </p>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-slate-900 text-slate-400 py-8 text-center text-sm">
        <p>&copy; 2026 AI Stock Prediction Universe Guide. Based on the provided Source Report.</p>
    </footer>

    <!-- Logic Script -->
    <script>
        // --- State ---
        const state = {
            strategy: 'beginner',
            currentTab: 'liquidity',
            sectorChart: null
        };

        // --- Data & Content ---
        const contentData = {
            beginner: {
                title: "æ¨å¥¨ï¼šæŒ‡æ•°æ¡ç”¨éŠ˜æŸ„ (Indices)",
                subtitle: "æ—¥çµŒå¹³å‡æ ªä¾¡ (Nikkei 225) / TOPIX Core 30",
                description: `
                    <ul class="space-y-4">
                        <li class="flex items-start">
                            <span class="text-teal-500 mr-2">âœ…</span>
                            <span><strong>å®‰å…¨æ€§:</strong> æ—¢ã«æ±è¨¼ã®å¯©æŸ»ã‚’é€šéã—ã¦ãŠã‚Šã€æµå‹•æ€§ãŒæ‹…ä¿ã•ã‚Œã¦ã„ã¾ã™ã€‚</span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-teal-500 mr-2">âœ…</span>
                            <span><strong>å…¥æ‰‹æ€§:</strong> <span class="bg-yellow-100 px-1 font-bold text-gray-800">æ—¥çµŒ225</span>ãªã‚‰Wikipediaç­‰ã‹ã‚‰ç°¡å˜ã«ãƒªã‚¹ãƒˆåŒ–å¯èƒ½ã€‚</span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-teal-500 mr-2">âœ…</span>
                            <span><strong>åˆ†æç›¸æ€§:</strong> ãƒ‹ãƒ¥ãƒ¼ã‚¹è¨˜äº‹ãŒè±Šå¯Œã§ã€æ„Ÿæƒ…åˆ†æï¼ˆSentiment Analysisï¼‰ã®åŠ¹æœãŒå‡ºã‚„ã™ã„ã§ã™ã€‚</span>
                        </li>
                    </ul>
                    <div class="mt-6 p-4 bg-teal-50 rounded-lg text-sm text-teal-800 border border-teal-100">
                        <strong>æœ€åˆã®ä¸€æ­©:</strong> è¤‡é›‘ãªã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ã¯ä¸è¦ã§ã™ã€‚ã¾ãšã¯æ—¥çµŒ225ã®ãƒªã‚¹ãƒˆã‚’ä½¿ã£ã¦ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’å®Œæˆã•ã›ã¾ã—ã‚‡ã†ã€‚
                    </div>
                `,
                count: "225",
                difficulty: "â˜…â˜†â˜†â˜†â˜†",
                barWidth: "20%"
            },
            pro: {
                title: "æ¨å¥¨ï¼šå£²è²·ä»£é‡‘ä¸Šä½ (Top Liquid)",
                subtitle: "æ±è¨¼å…¨éŠ˜æŸ„ã‹ã‚‰ Top 500 ~ 2000",
                description: `
                    <ul class="space-y-4">
                        <li class="flex items-start">
                            <span class="text-teal-500 mr-2">âœ…</span>
                            <span><strong>ã‚¹ãƒªãƒƒãƒšãƒ¼ã‚¸å›é¿:</strong> å£²è²·ä»£é‡‘ï¼ˆæ ªä¾¡Ã—å‡ºæ¥é«˜ï¼‰ãŒå¤§ãã„éŠ˜æŸ„ã‚’é¸ã¶ã“ã¨ã§ã€ãƒã‚¤ã‚ºã‚’æœ€å°åŒ–ã—ã¾ã™ã€‚</span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-teal-500 mr-2">âœ…</span>
                            <span><strong>æ©Ÿä¼šæå¤±é˜²æ­¢:</strong> æŒ‡æ•°ã«å«ã¾ã‚Œã¦ã„ãªã„ã€å‹¢ã„ã®ã‚ã‚‹æ–°èˆˆéŠ˜æŸ„ã‚‚æ•æ‰ã§ãã¾ã™ã€‚</span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-teal-500 mr-2">âœ…</span>
                            <span><strong>ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º:</strong> å¤§å‹æ ªãƒ¢ãƒ‡ãƒ«ãªã‚‰500ã€ä¸­å°å‹å«ã‚€ãªã‚‰2000ã¨èª¿æ•´å¯èƒ½ã€‚</span>
                        </li>
                    </ul>
                    <div class="mt-6 p-4 bg-blue-50 rounded-lg text-sm text-blue-800 border border-blue-100">
                        <strong>å®Ÿè£…ã®ã‚³ãƒ„:</strong> æ±è¨¼ã®å…¨éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ãƒªã‚¹ãƒˆã‚’ç”¨æ„ã—ã€ç›´è¿‘30æ—¥ã®å¹³å‡å£²è²·ä»£é‡‘ã§ã‚½ãƒ¼ãƒˆã—ã¦æŠ½å‡ºã—ã¾ã™ã€‚
                    </div>
                `,
                count: "500+",
                difficulty: "â˜…â˜…â˜…â˜…â˜†",
                barWidth: "85%"
            }
        };

        // --- Functions ---

        function setStrategy(type) {
            state.strategy = type;
            const data = contentData[type];

            // Update UI State
            const btnBeginner = document.getElementById('btn-beginner');
            const btnPro = document.getElementById('btn-pro');

            if (type === 'beginner') {
                btnBeginner.className = "w-full text-left p-4 rounded-lg border-2 transition-all duration-200 border-teal-500 bg-teal-50 shadow-md transform scale-[1.02]";
                btnPro.className = "w-full text-left p-4 rounded-lg border-2 border-gray-200 hover:border-teal-300 transition-all duration-200 bg-white opacity-70 hover:opacity-100";
            } else {
                btnBeginner.className = "w-full text-left p-4 rounded-lg border-2 border-gray-200 hover:border-teal-300 transition-all duration-200 bg-white opacity-70 hover:opacity-100";
                btnPro.className = "w-full text-left p-4 rounded-lg border-2 transition-all duration-200 border-teal-500 bg-teal-50 shadow-md transform scale-[1.02]";
            }

            // Update Content
            const contentDiv = document.getElementById('strategy-content');
            contentDiv.innerHTML = `
                <h3 class="text-2xl font-bold text-gray-800 mb-1">${data.title}</h3>
                <p class="text-sm font-bold text-teal-600 mb-6 uppercase tracking-wide">${data.subtitle}</p>
                <div class="text-gray-600 leading-relaxed text-sm md:text-base">
                    ${data.description}
                </div>
            `;

            // Update Metrics
            document.getElementById('metric-count').innerText = data.count;
            document.getElementById('metric-difficulty').innerText = data.difficulty;
            document.getElementById('metric-bar').style.width = data.barWidth;
        }

        function switchTab(tab) {
            state.currentTab = tab;
            const btnLiq = document.getElementById('tab-liquidity');
            const btnSec = document.getElementById('tab-sector');
            const viewLiq = document.getElementById('view-liquidity');
            const viewSec = document.getElementById('view-sector');

            if (tab === 'liquidity') {
                btnLiq.className = "px-6 py-2 rounded-md text-sm font-medium bg-teal-600 text-white shadow-sm transition-all";
                btnSec.className = "px-6 py-2 rounded-md text-sm font-medium text-gray-600 hover:text-teal-600 transition-all";
                viewLiq.classList.remove('hidden');
                viewSec.classList.add('hidden');
                setTimeout(() => viewLiq.classList.remove('opacity-0'), 10);

                // Resize Plotly
                Plotly.Plots.resize('plotly-liquidity');
            } else {
                btnSec.className = "px-6 py-2 rounded-md text-sm font-medium bg-teal-600 text-white shadow-sm transition-all";
                btnLiq.className = "px-6 py-2 rounded-md text-sm font-medium text-gray-600 hover:text-teal-600 transition-all";
                viewSec.classList.remove('hidden');
                viewLiq.classList.add('hidden');
                setTimeout(() => viewSec.classList.remove('opacity-0'), 10);
            }
        }

        function showCode(type) {
            const btnA = document.getElementById('btn-code-A');
            const btnB = document.getElementById('btn-code-B');
            const contentA = document.getElementById('code-content-A');
            const contentB = document.getElementById('code-content-B');

            if (type === 'A') {
                btnA.className = "px-6 py-3 text-sm font-medium text-teal-400 border-b-2 border-teal-400 bg-slate-700 focus:outline-none transition";
                btnB.className = "px-6 py-3 text-sm font-medium text-slate-400 hover:text-slate-200 focus:outline-none transition";
                contentA.classList.remove('hidden');
                contentB.classList.add('hidden');
            } else {
                btnB.className = "px-6 py-3 text-sm font-medium text-teal-400 border-b-2 border-teal-400 bg-slate-700 focus:outline-none transition";
                btnA.className = "px-6 py-3 text-sm font-medium text-slate-400 hover:text-slate-200 focus:outline-none transition";
                contentB.classList.remove('hidden');
                contentA.classList.add('hidden');
            }
        }

        function copyCode() {
            const activeCode = document.querySelector('.code-scroll:not(.hidden) pre').innerText;
            navigator.clipboard.writeText(activeCode).then(() => {
                alert('ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ');
            });
        }

        // --- Visualizations ---

        // 1. Plotly Liquidity Chart
        function initLiquidityChart() {
            // Data Generation: High Liquidity = Low Error
            const n = 150;
            const x = []; // Trading Value
            const y = []; // Model Error
            const text = [];

            for (let i = 0; i < n; i++) {
                // Logarithmic distribution for trading value
                const val = Math.exp(Math.random() * 6 + 12);
                x.push(val);

                // Error inverse to value + noise
                const baseError = 100 / Math.log(val);
                const noise = Math.random() * 2;
                y.push(baseError + noise);

                text.push(`Ticker ${1000 + i}`);
            }

            const trace = {
                x: x,
                y: y,
                mode: 'markers',
                type: 'scatter',
                text: text,
                marker: {
                    size: 10,
                    color: x.map(v => Math.log(v)), // Color by value
                    colorscale: 'Teal',
                    opacity: 0.7
                }
            };

            const layout = {
                margin: { t: 20, r: 20, b: 40, l: 60 },
                xaxis: {
                    type: 'log',
                    title: 'å£²è²·ä»£é‡‘ (å¯¾æ•°ã‚¹ã‚±ãƒ¼ãƒ«)',
                    gridcolor: '#f1f5f9'
                },
                yaxis: {
                    title: 'äºˆæ¸¬èª¤å·® (RMSE)',
                    gridcolor: '#f1f5f9'
                },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)',
                hovermode: 'closest'
            };

            const config = { responsive: true, displayModeBar: false };
            Plotly.newPlot('plotly-liquidity', [trace], layout, config);
        }

        // 2. Chart.js Sector Rotation
        function initSectorChart() {
            const ctx = document.getElementById('chart-sector').getContext('2d');

            // Initialize with "Normal" data
            const labels = Array.from({ length: 20 }, (_, i) => `Day ${i + 1}`);

            state.sectorChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'ITã‚»ã‚¯ã‚¿ãƒ¼ (High Beta)',
                            data: [],
                            borderColor: '#0f766e', // Teal 700
                            backgroundColor: 'rgba(15, 118, 110, 0.1)',
                            borderWidth: 2,
                            tension: 0.4
                        },
                        {
                            label: 'éŠ€è¡Œã‚»ã‚¯ã‚¿ãƒ¼ (Defensive)',
                            data: [],
                            borderColor: '#f59e0b', // Amber 500
                            backgroundColor: 'rgba(245, 158, 11, 0.1)',
                            borderWidth: 2,
                            tension: 0.4
                        },
                        {
                            label: 'å¸‚å ´å¹³å‡ (Index)',
                            data: [],
                            borderColor: '#94a3b8', // Slate 400
                            borderWidth: 2,
                            borderDash: [5, 5],
                            pointRadius: 0
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                            callbacks: {
                                footer: (items) => {
                                    // Illustrate Ranking
                                    const vals = items.map(i => i.raw).sort((a, b) => b - a);
                                    let str = "Rank: ";
                                    items.forEach(item => {
                                        const rank = vals.indexOf(item.raw) + 1;
                                        str += `${item.dataset.label.split(' ')[0]}=${rank}ä½ `;
                                    });
                                    return str;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            grid: { color: '#f1f5f9' }
                        },
                        x: {
                            grid: { display: false }
                        }
                    }
                }
            });

            updateSectorChart('normal');
        }

        function updateSectorChart(mode) {
            const days = 20;
            const dataIT = [];
            const dataBank = [];
            const dataIndex = [];

            let priceIT = 100;
            let priceBank = 100;

            for (let i = 0; i < days; i++) {
                let changeIT = 0;
                let changeBank = 0;

                if (mode === 'normal') {
                    // Correlated
                    const mkt = (Math.random() - 0.45);
                    changeIT = mkt * 1.5;
                    changeBank = mkt * 0.8;
                } else if (mode === 'rotation') {
                    // Inverse correlation (Rotation)
                    changeIT = (Math.random() - 0.7) * 2; // IT falls
                    changeBank = (Math.random() - 0.3) * 1.5; // Bank rises
                } else if (mode === 'crash') {
                    // Everything falls, but at different rates
                    changeIT = -2 - Math.random();
                    changeBank = -0.5 - Math.random(); // Bank falls less
                }

                priceIT += changeIT;
                priceBank += changeBank;

                dataIT.push(priceIT);
                dataBank.push(priceBank);
                dataIndex.push((priceIT + priceBank) / 2);
            }

            state.sectorChart.data.datasets[0].data = dataIT;
            state.sectorChart.data.datasets[1].data = dataBank;
            state.sectorChart.data.datasets[2].data = dataIndex;
            state.sectorChart.update();
        }

        // --- Init ---
        window.addEventListener('DOMContentLoaded', () => {
            setStrategy('beginner');
            initLiquidityChart();
            initSectorChart();
        });

    </script>
</body>

</html>